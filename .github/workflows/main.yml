name: Unity Build

on:
  push:
    branches:
      - main
      - feature/**
  workflow_dispatch: 
    inputs:
      logLevel:
        description: 'Build'
        required: true
    
jobs:
    build:
      if: github.event_name == 'workflow_dispatch'
      runs-on: self-hosted
      steps:
        - name: Pull latest changes
          run: git pull        
        
        - name: Checkout code
          uses: actions/checkout@v2

        - name: Build the Unity project
          run: |
                /Applications/Unity/Hub/Editor/2021.3.16f1/Unity.app/Contents/MacOS/Unity -batchmode -buildTarget android -quit â€‘ignorecompilererrors -executeMethod CustomBuilder.AndroidDevelopment -projectPath /Users/ilakocura/ability-learning -logFile /Users/ilakocura/BuildsCiLogs/BuildLog.log

        - name: Upload Build Artifacts
          uses: actions/upload-artifact@v2
          with:
              name: Game-Build
              path: /Users/ilakocura/BuildsCi/testBuild.apk
